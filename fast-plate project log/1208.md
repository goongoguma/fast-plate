# fast-plate project log

- 주제 : 망고플레이트 서비스 만들어보기 (https://www.mangoplate.com/)
- 조원 : 신창선, 조민지, 안재현
- 개발 일정 : 2018/12/03 ~ 2018/12/21

## 2018 / 12 / 08

### 첫번째 목표 : WritingReview 페이지를 presentational, container, page 컴포넌트로 나누기

- 어제 만들어본 WritingReviewView페이지는 내가봐도 너무 엉망이었다.
- 팀장이 presentational, container, page 세가지로 구분해서 작성하는것을 추천
- WritingReview 컴포넌트에는 상태가 WritingReviewView 컴포넌트는 WritingReviw 컴포넌트에서 내려준 상태들을 가지고 화면에 그려주는 컴포넌트
- 아이콘들을 가져왔던 url들을 기존의 변수에서 container 컴포넌트의 state안에 넣어주었다.
- 그 외 상태를 바꾸는 모든 인스턴스들도 container 컴포넌트로 이동시킨 뒤 WritingReviewView에 props로 내려줬다.
- 이렇게 나누었더니 정말 깔끔해졌다.

### 두번째 목표 : 코드의 양 줄이기

- 컴포넌트를 나누었더니 코드의 양도 줄어들고 더 깔끔해졌다.

```js
// 전
toggleGoodOpen() {
  const { reviewScore } = this.props;
  this.setState(prevState => ({
    goodOpen: !prevState.goodOpen,
    okOpen: false,
    notGoodOpen: false,
  }));
  document.querySelector('.pickColor1').style.color = '#ff792a';
  document.querySelector('.pickColor2').style.color = '#181818';
  document.querySelector('.pickColor3').style.color = '#181818';
  if (this.state.goodOpen) {
    console.log(reviewScore);
    document.querySelector('.pickColor1').style.color = '#181818';
  } else {
    this.setState({
      reviewScore: reviewScore + 5,
    });
    console.log(this.state.reviewScore);
  }
}
// 후
toggleGoodOpen = () => {
  this.setState(
    {
      goodOpen: true,
      okOpen: false,
      notGoodOpen: false,
      reviewScore: 5,
    },
    // this.setState는 비동기함수
    () => console.log(this.state.reviewScore) // 5
  );
  if (!this.state.goodOpen) {
    document.querySelector('.pickColor1').style.color = '#ff792a';
    document.querySelector('.pickColor2').style.color = '#181818';
    document.querySelector('.pickColor3').style.color = '#181818';
  }
};

```

### 세번째 목표 : 얼굴 아이콘마다 점수넣어주기

- 여기서 많이 해맸다.
- 원래의 계획은 얼굴 아이콘을 한번 클릭하면 아이콘의 모양이 전환되고 기본상태인 reviewScore에 점수를 넣어주고 다시한번 클릭하면 아이콘의 모양이 원래대로 돌아오고 점수는 다시 0으로 리셋으로 만들려고 했지만...
- 3개의 상태를 왔다갔다 하면서 점수를 전환시켜줄려고 하니까 계속해서 꼬인다.
- console.log를 사용해봐도 내가 원하는 점수가 안나온다.
- 내가 서비스를 이용해본다면 아이콘을 눌렀을 때 그 아이콘에 맞는 점수만 나오게하면 되는것이 아닐까 하는 생각이 스쳤다.
- 그래서 아이콘을 다시한번 클릭했을 때 아이콘의 모양이 원래대로 전환되고 점수가 리셋되는 부분은 없어도 될거같다. 어차피 다른 아이콘을 클릭하면 점수를 setState를 이용해서 바꾸면 되는거니까 굳이 0점을 줄 필요가 없다.
- 하지만 그렇게 구현 한 뒤 console.log를 사용해봐도 내가 원하는 점수가 안나온다... 이게 아닌데....
- stackoverflow를 찾아보니 아... 맞다... setState는 비동ㄱ.....

### 느낀점

- 그동안 컴포넌트를 나누어서 작성하는것에 대해서는 막연하게만 알고 있었는데
- 직접 작성해보니 왜 이렇게 나누어서 작성하는지 알게되었다.
- 하지만 새로 정리한 코드도 냄새가 조금 나는데... 분명 더 줄일수 있을거같다..
- setState는 비동기... 이거 하나만 알았어도 몇시간동안 삽질하는 일은 없었을텐데... 아쉽다
- 하지만 이번을 계기로 확실히 기억했다... setState는 비동기이다.
