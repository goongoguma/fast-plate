# fast-plate project log

- 주제 : 망고플레이트 서비스 만들어보기 (https://www.mangoplate.com/)
- 조원 : 신창선, 조민지, 안재현
- 개발 일정 : 2018/12/03 ~ 2018/12/21

## 2018 / 12 / 16

### 첫번째 목표 : 페이스북 로그인 연동시켜주기

- 처음으로 하는 로그인 작업이다.
- 어떻게 하는지 감이 잡히질 않아 구글을 참조했다.
- react-facebook-login을 npm으로 설치했다.
- js 파일을 하나 만든 뒤에 초기 상태에 필요한 정보들을 넣는다.
  ```js
  state = {
    isLoggedIn: false,
    userID: "",
    name: "",
    email: "",
    picture: "",
    token: null
  };
  ```
- 서버에서 필요한 정보를 가져와 초기 상태에 업데이트 시켜주기 위한 메소드인 responsFacebook 메소드를 만든다.
- 인수 response안에는 facebook에서 로그인 후의 유저 정보를 담고있다.
  ```js
  responseFacebook = response => {
    console.log(response);
    this.setState({
      isLoggedIn: true,
      userID: response.userID,
      name: response.name,
      email: response.email,
      picture: response.picture.data.url,
      token: response.accessToken
    });
  };
  ```
- render안에 변수 fbContent를 만들어 isLoggedIn이 true일때는 유저의 프로필 사진을 보여주고 아닐때는 페이스북에 로그인 요청을 하는 코드를 작성해준다.
- 그런뒤에 그 변수를 return 해주면 로그인이 기능이 완료된다.

  ```js
  render() {
    let fbContent;

    if (this.state.isLoggedIn) {
      localStorage.setItem('token', this.state.token);
      console.log(localStorage);
      fbContent = (
        <div>
          <img src={this.state.picture} alt={this.state.name} />
        </div>
      );
    } else {
      fbContent = (
        <FacebookLogin
          appId="323220401853541"
          autoLoad={true}
          fields="name,email,picture"
          onClick={this.componentClicked}
          callback={this.responseFacebook}
        />
      );
    }
    return <div>{fbContent}</div>;
  }
  ```

### 느낀점

- 이제 필요한 정보들을 다 불러왔다. 앞으로의 할 일은
  - 필요한 정보들을 어떻게 popup 컴포넌트에 보내 로그인을 하면 헤더 우측에 있는 아이콘을 프로필 사진으로 바꿔줘야하며
  - localStorage에 캐시를 저장한 뒤에 캐시가 없으면 댓글쓰기 기능을 제한하는 기능을 만들어야한다
